{% extends "base_accounting.html" %}
{% block acct_content %}
<div class="flex items-center justify-between mb-4">
  <h2 class="text-xl font-semibold">{{ _('Bill of Lading') }}</h2>
</div>
<div class="grid md:grid-cols-2 gap-4">
  <div>
    <h3 class="font-semibold mb-2">{{ _('Existing BOLs') }}</h3>
    <table class="min-w-full text-sm bg-slate-900/40 rounded-2xl overflow-hidden">
      <thead class="bg-slate-900/60 text-slate-300">
        <tr>
          <th class="px-3 py-2 text-left">{{ _('BOL #') }}</th>
          <th class="px-3 py-2 text-left">{{ _('Shipment') }}</th>
          <th class="px-3 py-2 text-left">{{ _('Date') }}</th>
          <th class="px-3 py-2 text-left">{{ _('Actions') }}</th>
        </tr>
      </thead>
      <tbody>
        {% for b in bols %}
        <tr class="border-t border-slate-800">
          <td class="px-3 py-2">{{ b.bol_number }}</td>
          <td class="px-3 py-2">{{ b.shipment.shipment_number if b.shipment else '-' }}</td>
          <td class="px-3 py-2">{{ b.issue_date.strftime('%Y-%m-%d') if b.issue_date else '' }}</td>
          <td class="px-3 py-2 space-x-2">
            <a href="{{ url_for('acct.bol_export', bol_id=b.id) }}" class="text-primary">PDF</a>
            <form method="post" action="{{ url_for('acct.bol_email', bol_id=b.id) }}" class="inline-flex items-center gap-2">
              <input name="email" placeholder="{{ _('email') }}" class="bg-slate-900 border border-slate-700 rounded p-1 text-xs" />
              <button class="text-xs px-2 py-1 rounded bg-slate-800">{{ _('Send') }}</button>
            </form>
            <form method="post" action="{{ url_for('acct.bol_upload', bol_id=b.id) }}" enctype="multipart/form-data" class="inline-flex items-center gap-2">
              <input type="file" name="file" class="text-xs" />
              <button class="text-xs px-2 py-1 rounded bg-slate-800">{{ _('Upload') }}</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="3" class="px-3 py-4 text-center text-slate-400">{{ _('No BOLs.') }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div>
    <h3 class="font-semibold mb-2">{{ _('Create New') }}</h3>
    <form method="post" action="{{ url_for('acct.bol_new') }}" class="space-y-2 bg-slate-900/40 p-4 rounded-2xl border border-slate-800">
      <div>
        <label class="block text-sm mb-1">{{ _('Shipment') }}</label>
        <select name="shipment_id" class="w-full bg-slate-900 border border-slate-700 rounded p-2">
          {% for s in shipments %}
          <option value="{{ s.id }}">{{ s.shipment_number }} - {{ s.origin_port }} â†’ {{ s.destination_port }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block text-sm mb-1">{{ _('BOL Number (optional)') }}</label>
        <input name="bol_number" class="w-full bg-slate-900 border border-slate-700 rounded p-2" />
      </div>
      <div class="pt-2">
        <button class="px-3 py-2 rounded bg-primary text-white">{{ _('Create') }}</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
