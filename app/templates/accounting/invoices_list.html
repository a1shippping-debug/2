{% extends "base_accounting.html" %}
{% block acct_content %}
<div class="flex items-center justify-between mb-4">
  <h2 class="text-xl font-semibold">Invoices</h2>
  <a href="{{ url_for('acct.invoices_new') }}" class="px-3 py-2 rounded bg-primary text-white">New Invoice</a>
</div>
<table class="min-w-full text-sm bg-slate-900/40 rounded-2xl overflow-hidden">
  <thead class="bg-slate-900/60 text-slate-300">
    <tr>
      <th class="px-3 py-2 text-left">Invoice No</th>
      <th class="px-3 py-2 text-left">Client</th>
      <th class="px-3 py-2 text-left">Total (OMR)</th>
      <th class="px-3 py-2 text-left">Status</th>
      <th class="px-3 py-2 text-left">Date</th>
      <th class="px-3 py-2 text-left">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for inv in invoices %}
    <tr class="border-t border-slate-800">
      <td class="px-3 py-2">{{ inv.invoice_number }}</td>
      <td class="px-3 py-2">{{ inv.customer.company_name if inv.customer else '-' }}</td>
      <td class="px-3 py-2">{{ '%.3f'|format(inv.total_omr or 0) }}</td>
      <td class="px-3 py-2">{{ inv.status }}</td>
      <td class="px-3 py-2">{{ inv.created_at.strftime('%Y-%m-%d') }}</td>
      <td class="px-3 py-2 space-x-2">
        <a href="{{ url_for('acct.invoices_edit', invoice_id=inv.id) }}" class="text-primary">Edit</a>
        <a href="{{ url_for('acct.invoices_export', invoice_id=inv.id) }}" class="text-primary">PDF</a>
        <form method="post" action="{{ url_for('acct.invoices_delete', invoice_id=inv.id) }}" class="inline" onsubmit="return confirm('Delete invoice?')">
          <button class="text-rose-400">Delete</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="6" class="px-3 py-4 text-center text-slate-400">No invoices.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
