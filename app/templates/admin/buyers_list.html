{% extends "base_admin.html" %}
{% block title %}البايرات{% endblock %}
{% block header %}البايرات{% endblock %}
{% block content %}
<style>
  .buyers-card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; box-shadow:0 6px 20px rgba(0,0,0,0.05); overflow:hidden; }
  .buyers-header { padding:16px 20px; display:flex; align-items:center; justify-content:space-between; }
  .buyers-title { margin:0; font-size:18px; font-weight:600; }
  .buyers-table { width:100%; border-collapse:collapse; font-size:14px; }
  /* Copart-like clear palette */
  .buyers-table thead { background:#003e7e; color:#ffffff; }
  .buyers-table th, .buyers-table td { padding:12px 14px; text-align:right; }
  .buyers-table th { font-weight:700; letter-spacing:0.2px; }
  .buyers-table tbody tr { border-top:1px solid #e5eefc; }
  .buyers-table tbody tr:nth-child(even) { background:#f5f9ff; }
  .buyers-table tbody tr:hover { background:#eaf2ff; }
  .muted { color:#6b7280; }
  .action-link { font-weight:600; text-decoration:none; margin-inline:0.25rem; }
  .action-link.edit { color:#003e7e; }
  .action-link.delete { color:#dc2626; background:none; border:none; cursor:pointer; }
  @media (max-width: 640px) {
    .buyers-table th, .buyers-table td { padding:10px; font-size:13px; }
  }
  /* RTL helpers if needed */
  [dir="rtl"] .buyers-table th, [dir="rtl"] .buyers-table td { text-align:right; }
  [dir="rtl"] .buyers-header { direction:rtl; }
  .center { text-align:center; }
  .nowrap { white-space:nowrap; }
  .container { max-width:100%; }
  @media (min-width: 1024px) { .container { max-width: 1000px; margin-inline:auto; } }
  .spacer { height: 8px; }
</style>

<div class="container" dir="rtl">
  <div class="buyers-card">
    <div class="buyers-header">
      <h2 class="buyers-title">قائمة البايرات</h2>
      <a href="{{ url_for('admin.buyers_new') }}" class="px-4 py-2 bg-primary text-white rounded shadow-soft hover:opacity-90">إضافة باير</a>
    </div>
    <div class="spacer"></div>
    <div style="overflow-x:auto;">
      <table class="buyers-table">
        <thead>
          <tr>
            <th class="nowrap">رقم الباير</th>
            <th class="nowrap">الباسوورد</th>
            <th class="nowrap">العميل</th>
            <th class="nowrap">الإجراءات</th>
          </tr>
        </thead>
        <tbody>
          {% for b in buyers %}
          <tr>
            <td>{{ b.buyer_number or '-' }}</td>
            <td>{{ b.password or '-' }}</td>
            <td>{{ b.customer.display_name if b.customer else '-' }}</td>
            <td class="nowrap">
              <a href="{{ url_for('admin.buyers_edit', buyer_id=b.id) }}" class="action-link edit">تعديل</a>
              <form action="{{ url_for('admin.buyers_delete', buyer_id=b.id) }}" method="post" style="display:inline" onsubmit="return confirm('هل تريد الحذف؟')">
                <button type="submit" class="action-link delete">حذف</button>
              </form>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4" class="center muted">لا توجد بيانات حالياً</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
